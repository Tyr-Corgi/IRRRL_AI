@using static IRRRL.Web.Pages.Veteran.Apply

<h4 class="mb-4">Personal Information</h4>

<div class="alert alert-info mb-4">
    <strong>ðŸ“‹ Note:</strong> Your loan officer will verify this information with you.
</div>

<EditForm Model="@Model" OnValidSubmit="HandleNext">
    <DataAnnotationsValidator />

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">First Name <span class="text-danger">*</span></label>
            <InputText @bind-Value="Model.FirstName" class="form-control" placeholder="John" />
            <ValidationMessage For="@(() => Model.FirstName)" class="text-danger" />
        </div>

        <div class="col-md-6 mb-3">
            <label class="form-label">Last Name <span class="text-danger">*</span></label>
            <InputText @bind-Value="Model.LastName" class="form-control" placeholder="Smith" />
            <ValidationMessage For="@(() => Model.LastName)" class="text-danger" />
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Date of Birth <span class="text-danger">*</span></label>
            <InputDate @bind-Value="Model.DateOfBirth" class="form-control" />
            <ValidationMessage For="@(() => Model.DateOfBirth)" class="text-danger" />
        </div>

        <div class="col-md-6 mb-3">
            <label class="form-label">Social Security Number <span class="text-danger">*</span></label>
            <InputText @bind-Value="Model.SSN" class="form-control" placeholder="123-45-6789" type="password" />
            <ValidationMessage For="@(() => Model.SSN)" class="text-danger" />
            <small class="text-muted">Your SSN is securely encrypted</small>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Phone Number <span class="text-danger">*</span></label>
            <InputText @bind-Value="Model.PhoneNumber" class="form-control" placeholder="(555) 123-4567" />
            <ValidationMessage For="@(() => Model.PhoneNumber)" class="text-danger" />
        </div>

        <div class="col-md-6 mb-3">
            <label class="form-label">Email Address <span class="text-danger">*</span></label>
            <InputText @bind-Value="Model.Email" class="form-control" placeholder="john.smith@email.com" type="email" />
            <ValidationMessage For="@(() => Model.Email)" class="text-danger" />
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Citizenship Status <span class="text-danger">*</span></label>
            <InputSelect @bind-Value="Model.CitizenshipStatus" class="form-select">
                <option value="">Select Status</option>
                <option value="USCitizen">U.S. Citizen</option>
                <option value="PermanentResident">Permanent Resident Alien</option>
                <option value="NonPermanentResident">Non-Permanent Resident Alien</option>
            </InputSelect>
            <ValidationMessage For="@(() => Model.CitizenshipStatus)" class="text-danger" />
        </div>

        <div class="col-md-6 mb-3">
            <label class="form-label">Marital Status <span class="text-danger">*</span></label>
            <InputSelect @bind-Value="Model.MaritalStatus" class="form-select">
                <option value="">Select Status</option>
                <option value="Married">Married</option>
                <option value="Unmarried">Unmarried (Single, Divorced, Widowed)</option>
                <option value="Separated">Separated</option>
            </InputSelect>
            <ValidationMessage For="@(() => Model.MaritalStatus)" class="text-danger" />
        </div>
    </div>

    @if (Model.MaritalStatus == "Married")
    {
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Spouse First Name</label>
                <InputText @bind-Value="Model.SpouseFirstName" class="form-control" placeholder="Jane" />
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Spouse Last Name</label>
                <InputText @bind-Value="Model.SpouseLastName" class="form-control" placeholder="Doe" />
            </div>
        </div>
    }

    <div class="d-flex justify-content-end mt-4">
        <button type="submit" class="btn btn-primary btn-lg">
            Next: Current Loan Information â†’
        </button>
    </div>
</EditForm>

@code {
    [Parameter] public ApplicationFormModel Model { get; set; } = new();
    [Parameter] public EventCallback OnNext { get; set; }

    private async Task HandleNext()
    {
        await OnNext.InvokeAsync();
    }
}

